<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>DOM Events</title>
  <link rel="stylesheet" href="css/reveal.min.css">
  <link rel="stylesheet" href="css/theme/moon.css" id="theme">
  <link rel="stylesheet" href="lib/css/zenburn.css">
  <base target="_blank">
  <style>
  .text-right {
    text-align: right;
  }

  .text-left {
    text-align: left;
  }

  .text-center {
    text-align: center;
  }

  .contacts > div {
      line-height: 20px;
  }

  h2 {
    margin-bottom: 1.5em;
  }

  code {
    line-height: 1.7em !important;
    font-size: 1.2em !important;
  }

  code.javascript.title {
    font-size: 1.5em;
  }

  .no-break {
    white-space: nowrap !important;
  }

  .actions {
    padding-top: 1em !important;
  }

  .actions div{
    display: inline-block;
    width: 4em;
    height: 4em;
  }

  .actions div svg {
    fill: rgb(147, 161, 161);
  }

  .example {
    background: white;
    padding: 1.5em !important;
  }

  pre .javascript {
    opacity: 1 !important;
  }

  a {
    color: slategray !important;
    font-family: monospace !important;
  }
</style>
</head>
<body>
  <div class="reveal">
    <div class="slides">
      <section>
        <h2>DOM Events</h2>
        <div class="contacts">
          <div class="text-right">
            <small>Andrei Vouchanka</small>
          </div>
          <div class="text-right">
            <small><a href="mailto:volchenko.andrei@gmail.com" style="font-family: monospace;">volchenko.andrei@gmail.com</a></small>
          </div>
        </div>
      </section>

      <section>
        <section>
          <h2>Triggers</h2>
          <p class="fragment">user actions</p>
          <div class="actions">
            <div class="fragment">
              <svg width="100%" height="100%" viewBox="0 0 70 70">
                <g>
                  <g>
                    <path d="M34.958,19.883c-0.012-1.289,0.587-2.296,1.165-3.272c0.769-1.293,1.563-2.632,1.011-4.473
                      c-0.563-1.688-1.628-2.518-2.57-3.249c-1.267-0.986-2.182-1.698-1.705-4.397l0.041-0.231l-1.368-0.241l-0.041,0.23
                      c-0.623,3.525,0.889,4.699,2.224,5.734c0.859,0.671,1.673,1.303,2.097,2.573c0.371,1.236-0.182,2.167-0.881,3.345
                      c-0.649,1.095-1.381,2.329-1.366,3.98c-6.92,0.009-13.99,0.294-13.99,24.889c0,11.08,8.906,15.211,14.52,15.211
                      s14.52-4.131,14.52-15.211C48.613,20.207,41.408,19.904,34.958,19.883z M34.094,58.593c-5.077,0-13.129-3.753-13.129-13.822
                      c0-2.015,0.046-3.907,0.135-5.633c2.025,0.94,6.777,2.771,13.021,2.771c4.449,0,8.81-0.943,12.968-2.805
                      c0.092,1.737,0.138,3.642,0.138,5.666C47.226,54.84,39.173,58.593,34.094,58.593z M34.789,40.512v-2.999
                      c0.854-0.165,1.497-0.921,1.497-1.806v-9.063c0-0.886-0.643-1.641-1.497-1.806v-3.567c5.711,0.012,11.059,0.239,12.207,16.349
                      C43.089,39.444,38.983,40.416,34.789,40.512z M34.897,35.707c0,0.252-0.205,0.458-0.457,0.458h-0.69
                      c-0.255,0-0.458-0.206-0.458-0.458v-9.063c0-0.252,0.203-0.458,0.458-0.458h0.69c0.252,0,0.457,0.206,0.457,0.458V35.707z
                       M32.902,22.045v2.794c-0.79,0.159-1.381,0.858-1.381,1.678v9.271c0,0.818,0.591,1.518,1.381,1.678v2.271
                      c-5.84-0.142-10.112-2.087-11.211-2.638C22.747,22.28,27.654,22.058,32.902,22.045z"></path>
                  </g>
                  <g>
                    <path d="M27.276,19.006l0.228-0.051L27.201,17.6l-0.228,0.052c-8.262,1.854-9.002,9.703-9.01,9.783l-0.02,0.234
                      l1.385,0.105l0.02-0.23C19.354,27.475,20.015,20.636,27.276,19.006z"></path>
                  </g>
                  <g>
                    <path d="M24.718,16.447l0.228-0.051l-0.305-1.355l-0.228,0.051c-8.262,1.855-9.002,9.703-9.007,9.783l-0.02,0.232
                      l1.383,0.108l0.02-0.231C16.796,24.916,17.45,18.078,24.718,16.447z"></path>
                  </g>
                </g>
              </svg>
            </div>
            <div class="fragment">
              <svg width="100%" height="100%" viewBox="-4 0 24 10">
                <path fill-rule="evenodd" d="M14.999,0H1.001C0.448,0,0,0.456,0,0.995v8.01C0,9.555,0.444,10,1.001,10  h13.998C15.552,10,16,9.544,16,9.005v-8.01C16,0.445,15.556,0,14.999,0z M12,2h1v1h-1V2z M12,4h1v1h-1V4z M10,2h1v1h-1V2z M10,4h1v1  h-1V4z M8,2h1v1H8V2z M10,6v1H9V6H10z M8,4h1v1H8V4z M6,2h1v1H6V2z M8,6v1H7V6H8z M6,4h1v1H6V4z M4,2h1v1H4V2z M6,6v1H5V6H6z M1,2h2  v1H1V2z M1,4h2v1H1V4z M2,9H1V8h1V9z M2,7H1V6h1V7z M4,9H3V8h1V9z M4,7H3V6h1V7z M4,4h1v1H4V4z M11,9H5V8h6V9z M11,6h1v1h-1V6z   M13,9h-1V8h1V9z M15,9h-1V8h1V9z M15,7h-2V6h2V7z M15,5h-1V3h1V5z"></path>
              </svg>
            </div>
            <div class="fragment">
              <svg width="100%" height="100%" viewBox="0 0 35 35">
                <g>
                  <path d="M11,6.5C11,5.1,12.1,4,13.5,4C14.9,4,16,5.1,16,6.5v2.4c0.6-0.6,1-1.5,1-2.4C17,4.6,15.4,3,13.5,3S10,4.6,10,6.5
                    c0,1,0.4,1.8,1,2.4V6.5z"></path>
                  <path d="M25.5,12c-0.8,0-1.5,0.7-1.5,1.5v2.2V16h-1v-2.3v-1.2c0-0.8-0.7-1.5-1.5-1.5c-0.8,0-1.5,0.7-1.5,1.5v1V15h-1v-1.5v-2
                    c0-0.8-0.7-1.5-1.5-1.5c-0.8,0-1.5,0.7-1.5,1.5v1.9V16h-1v-2.5v-7C15,5.7,14.3,5,13.5,5C12.7,5,12,5.7,12,6.5v10.3
                    c-2.1-2.2-4.8-4.6-5.9-3.5C5,14.4,7.8,17.4,11.7,24c1.8,3,4,5,7.8,5c4.1,0,7.5-3.4,7.5-7.5v-3.3v-4.7C27,12.7,26.3,12,25.5,12z"></path>
                </g>
              </svg>
            </div>
            <div class="fragment">
              <svg width="100%" height="100%" viewBox="0 0 100 100">
                <path d="M28.623,43.523c-3.916,0-7.102,3.186-7.102,7.102s3.186,7.102,7.102,7.102s7.102-3.186,7.102-7.102
                  S32.539,43.523,28.623,43.523z M34.344,49.994v1.262c0,0.523-0.424,0.947-0.947,0.947h-3.253v3.078c0,0.523-0.425,0.947-0.947,0.947
                  h-1.263c-0.522,0-0.946-0.424-0.946-0.947v-3.078h-2.901c-0.523,0-0.947-0.424-0.947-0.947v-1.262c0-0.523,0.424-0.947,0.947-0.947
                  h2.901v-3.076c0-0.523,0.424-0.947,0.946-0.947h1.263c0.522,0,0.947,0.424,0.947,0.947v3.076h3.253
                  C33.92,49.047,34.344,49.471,34.344,49.994z M70,36.707c-5.064,0-9.548,2.4-12.377,6.098c-2.26,0.477-4.795,0.801-7.621,0.818
                  c-2.804,0.018-5.32-0.281-7.567-0.742C39.609,39.141,35.1,36.707,30,36.707c-8.561,0-15.5,6.828-15.5,15.25
                  c0,1.072,0.115,2.117,0.329,3.127c0.377,6.971,1.997,21.707,8.029,27.453c7.267,6.92,16.929-18.76,16.929-18.76
                  s2.044-2.404,10.462-2.404s10.037,2.518,10.037,2.518c0.624,2.027,9.876,25.33,16.895,18.646c6.127-5.836,7.703-21.16,8.048-27.783
                  c0.171-0.908,0.271-1.84,0.271-2.797C85.5,43.535,78.561,36.707,70,36.707z M28.623,58.424c-4.438,0-8.048-3.611-8.048-8.049
                  s3.61-8.047,8.048-8.047s8.048,3.609,8.048,8.047S33.061,58.424,28.623,58.424z M68.688,42.809c1.313-1.012,3.196-0.768,4.208,0.545
                  s0.767,3.195-0.545,4.207c-1.313,1.012-3.196,0.768-4.208-0.545S67.375,43.82,68.688,42.809z M63.756,53.238
                  c-1.012-1.314-0.768-3.197,0.545-4.209c1.313-1.012,3.196-0.768,4.208,0.545c1.011,1.313,0.767,3.197-0.545,4.207
                  C66.65,54.793,64.768,54.549,63.756,53.238z M73.195,59.854c-1.313,1.012-3.195,0.768-4.207-0.545
                  c-1.011-1.313-0.768-3.197,0.545-4.207c1.313-1.012,3.196-0.768,4.208,0.545S74.509,58.842,73.195,59.854z M77.563,53.332
                  c-1.313,1.012-3.195,0.768-4.207-0.545c-1.011-1.313-0.768-3.195,0.545-4.207c1.313-1.012,3.196-0.768,4.208,0.545
                  S78.876,52.32,77.563,53.332z M49,41.598c-0.071-2.171-0.586-4.742,1.044-6.523c1.673-1.827,4.489-1.92,6.082-3.659
                  c4.638-5.066-1.768-9.814-4.364-13.688c-0.721-1.075,1.013-2.075,1.727-1.01c2.822,4.209,7.192,6.865,5.85,12.663
                  c-0.57,2.465-1.983,3.93-4.265,4.94c-1.28,0.568-3.209,1.112-3.835,2.531c-0.657,1.49-0.29,3.187-0.238,4.745
                  C51.043,42.888,49.042,42.884,49,41.598z"/>
              </svg>
            </div>
          </div>
          <p class="fragment">code</p>
        </section>

        <section>
          <p>
            <a href="https://developer.mozilla.org/en-US/docs/Web/Events">Event reference</a>
          </p>
        </section>

        <section>
          <h2>Mouse Events</h2>
          <ul>
            <li class="fragment">click</li>
            <li class="fragment">contextmenu</li>
            <li class="fragment">dblclick</li>
            <li class="fragment">mousedown</li>
            <li class="fragment">mouseenter</li>
            <li class="fragment">mouseleave</li>
            <li class="fragment">mouseout</li>
            <li class="fragment">mouseover</li>
            <li class="fragment">mouseup</li>
          </ul>
        </section>

        <section>
          <h2>Keyboard Events</h2>
          <ul>
            <li class="fragment">keydown</li>
            <li class="fragment">keypress</li>
            <li class="fragment">keyup</li>
          </ul>
        </section>

        <section>
          <h2>Drag Events</h2>
          <ul>
            <li class="fragment">drag</li>
            <li class="fragment">dargend</li>
            <li class="fragment">dragenter</li>
            <li class="fragment">dragover</li>
            <li class="fragment">dragleave</li>
            <li class="fragment">dragstart</li>
            <li class="fragment">drop</li>
          </ul>
        </section>

        <section>
          <h2>Focus Events</h2>
          <ul>
            <li class="fragment">focus</li>
            <li class="fragment">blur</li>
          </ul>
        </section>

        <section>
          <h2>Touch Events</h2>
          <ul>
            <li class="fragment">touchstart</li>
            <li class="fragment">touchmove</li>
            <li class="fragment">touchend</li>
            <li class="fragment">touchcancel</li>
          </ul>
        </section>
      </section>

      <section>
        <section>
          <h2>Event Handling</h2>
        </section>
        <section>
          <h2>Event Handling Models</h2>
          <ul>
            <li class="fragment">inline (facepalm)</li>
            <li class="fragment">traditional</li>
            <li class="fragment">W3C</li>
          </ul>
        </section>
      </section>

      <section>
        <section>
          <h2>Inline Event Handling Model</h2>
        </section>
        <section>
          <div class="example">
            <div onclick="alert('hello')">Click me</div>
          </div>
          <pre><code><div onclick="alert('hello')">
  Click me
</div></code></pre>
        </section>

        <section>
          <div class="example">
            <script>
              function sayHello() {
                alert('hello');
              }
            </script>
            <div onclick="sayHello()">
              Click me
            </div>
          </div>
          <pre><code>&lt;script&gt;
  function sayHello() {
    alert('hello');
  }
&lt;/script&gt;
&lt;div onclick="sayHello()"&gt;
  Click me
&lt;/div&gt;
&lt;/div&gt;</code></pre>
        </section>

        <section>
          <div class="example">
            <script>
              function sayHelloOnce() {
                alert('hello');
                event.target.removeAttribute('onclick');
              }
            </script>
            <div onclick="sayHelloOnce()">
              Click me
            </div>
          </div>
          <pre><code>&lt;script&gt;
  function sayHelloOnce(e) {
    alert('hello');
    event.target.removeAttribute('onclick');
  }
&lt;/script&gt;
&lt;div onclick="sayHelloOnce()"&gt;
  Click me
&lt;/div&gt;
&lt;/div&gt;</code></pre>
        </section>
      </section>

      <section>
        <section>
          <h2>"Traditional" Event Handling Model</h2>
          <pre class="fragment"><code class="text-center">element['on' + eventName] = eventHandler;</code></pre>
        </section>
        <section>
          <div class="example">
            <div id="superID">Click me</div>
            <script>
              var superDiv = document.querySelector('#superID');
              superDiv.onclick = function (e) {
                alert('click');
              }
            </script>
          </div>
          <pre><code>&lt;div id="superID">Click me&lt;/div&gt;
&lt;script&gt;
  var superDiv = document.querySelector('#superID');
  superDiv.onclick = function (e) {
    alert('click');
  }
&lt;/script&gt;</code></pre>
        </section>

        <section>
          <div class="example">
            <div id="superId">Click me</div>
            <script>
              var superDiv = document.querySelector('#superId');
              superDiv.onclick = function (e) {
                alert('click');
                superDiv.onclick = null;
              }
            </script>
          </div>
          <pre><code>&lt;div id="superId">Click me&lt;/div&gt;
&lt;script&gt;
  var superDiv = document.querySelector('#superID');
  superDiv.onclick = function (e) {
    alert('click');
    superDiv.onclick = null;
  }
&lt;/script&gt;</code></pre>
        </section>
      </section>

      <section>
        <section>
          <h2>W3C Event Handling Model</h2>
          <pre><code>element.addEventListener(eventName, eventHandler, useCapture);
assert(typeof eventName === 'string');
assert(typeof eventHandler === 'function');
assert(typeof useCapture === 'boolean');</code></pre>
        </section>

        <section>
          <div class="example">
            <div id="megaID">Click me</div>
            <script>
              var megaDiv = document.querySelector('#megaID');
              function alertClick() { alert('click'); }
              megaDiv.addEventListener('click', alertClick);
            </script>
          </div>
          <pre><code>&lt;div id="megaID"&gt;Click me&lt;/div&gt;
&lt;script&gt;
  var megaDiv = document.querySelector('#megaID');
  function alertClick() { alert('click'); }
  megaDiv.addEventListener('click', alertClick);
&lt;/script&gt;</code></pre>
        </section>

        <section>
          <div class="example">
            <div id="megaId">Click me</div>
            <script>
              var megaDiv = document.querySelector('#megaId');
              function alertClickOnce() {
                alert('click');
                megaDiv.removeEventListener('click', alertClickOnce);
              }
              megaDiv.addEventListener('click', alertClickOnce);
            </script>
          </div>
          <pre><code>&lt;div id="megaId"&gt;Click me&lt;/div&gt;
&lt;script&gt;
  var megaDiv = document.querySelector('#megaId');
  function alertClickOnce() {
    alert('click');
    megaDiv.removeEventListener('click', alertClickOnce);
  }
  megaDiv.addEventListener('click', alertClickOnce);
&lt;/script&gt;</code></pre>
        </section>
      </section>

      <section>
        <section>
          <h2>Event object</h2>
          <p class="fragment">Event object - argument passed to event handler</p>
          <pre class="fragment"><code>&lt;div id="prettyID"&gt;Click me&lt;/div&gt;
&lt;script&gt;
  var div = document.querySelector('#prettyID');
  div.addEventListener('click', function (e) {
    // e is EventObject
    assert(typeof e === 'object');
    assert(e instanceof Event)
  });
&lt;/script&gt;</code></pre>
        </section>

        <section>
          <h2>Event Target</h2>
          <pre class="fragment"><code>&lt;div id="prettyID"&gt;Click me&lt;/div&gt;
&lt;script&gt;
  var div = document.querySelector('#prettyID');
  div.addEventListener('click', function (e) {
    assert(e.target === div);
  });
&lt;/script&gt;</code></pre>
        </section>
      </section>

      <section>
        <section>
          <h2>Event DOM Trip</h2>
          <ul>
            <li class="fragment">capturing: document → e.target</li>
            <li class="fragment">bubbling: e.target → document</li>
          </ul>
          <p class="fragment"><a href="https://www.youtube.com/watch?v=0sfPDJiMTXk">explanation</a></p>
        </section>

        <section>
          <h2>Event</h2>
          <p class="fragment">properties</p>
          <ul>
            <li class="fragment">target</li>
            <li class="fragment">currentTarget</li>
            <li class="fragment">bubbles</li>
            <li class="fragment">eventPhase</li>
            <li class="fragment">type</li>
          </ul>
        </section>

        <section>
          <h2>Event</h2>
          <p class="fragment">methods</p>
          <ul>
            <li class="fragment">preventDefault</li>
            <li class="fragment">stopPropagation</li>
          </ul>
        </section>

        <section>
          <pre><code class="text-center">event.preventDefault</code></pre>
          <pre class="fragment"><code>&lt;a id="linkToGoogle" href="http://google.com"&gt;Google&lt;a&gt;
&lt;script&gt;
var linkToGoogle = document.querySelector('linkToGoogle');
linkToGoogle.addEventListener('click', function (e) {
  e.preventDefault();
  window.location.href = 'http://yandex.ru'; // Найдется всё!
});
&lt;/script&gt;</code></pre>
        </section>
      </section>

      <section>
        <section>
          <h2>Mouse Event</h2>
          <p>properties</p>
          <ul>
            <li class="fragment">altKey</li>
            <li class="fragment">shiftKey</li>
            <li class="fragment">button</li>
            <li class="fragment">clientX</li>
            <li class="fragment">clientY</li>
            <li class="fragment">screenX</li>
            <li class="fragment">screenY</li>
          </ul>
          <p class="fragment">
            <a href="https://developer.mozilla.org/en-US/docs/Web/API/MouseEvent">more</a>
          </p>
        </section>

        <section>
          <h2>Keyboard Event</h2>
          <p>properties</p>
          <ul>
            <li class="fragment">altKey</li>
            <li class="fragment">shiftKey</li>
            <li class="fragment">key</li>
            <li class="fragment">keyCode</li>
          </ul>
          <p class="fragment"><a href="https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent">more</a></p>
        </section>

        <section>
          <h2>Drag Events</h2>
          <p>properties</p>
          <ul>
            <li class="fragment">dataTransfer</li>
          </ul>
          <p class="fragment"><a href="https://developer.mozilla.org/en-US/docs/Web/API/DragEvent">more</a></p>
        </section>

        <section>
          <h2>Touch Events</h2>
          <p>properties</p>
          <ul>
            <li class="fragment">touches</li>
            <li class="fragment">targetTouches</li>
            <li class="fragment">changedTouches</li>
          </ul>
          <p class="fragment"><a href="https://developer.mozilla.org/en-US/docs/Web/API/TouchEvent">more</a></p>
        </section>
      </section>

      <section>
        <section>
          <h2>Event Delegation</h2>
          <pre class="fragment"><code>&lt;ul&gt;
  &lt;li&gt;&lt;a href="#"&gt;Item 1&lt;/a&gt;&lt;/li&gt; <!-- handle event on this item -->
  &lt;li&gt;&lt;a href="#"&gt;Item 2&lt;/a&gt;&lt;/li&gt; <!-- and this -->
  &lt;li&gt;&lt;a href="#"&gt;Item 3&lt;/a&gt;&lt;/li&gt; <!-- and this -->
  &lt;li&gt;&lt;a href="#"&gt;Item 4&lt;/a&gt;&lt;/li&gt; <!-- and this -->
  <!-- and so on, and so on, and so on -->
&lt;/ul&gt;</code></pre>
          <ul>
            <li class="fragment">add eventHandler to each item</li>
            <li class="fragment">handle dynamicly created items</li>
            <li class="fragment">remove eventHandlers when item removed</li>
          </ul>
          <p class="fragment">Don't you think it sucks?</p>
        </section>

        <section>
          <h2>Use event delegation insted!</h2>
          <pre class="fragment"><code>&lt;ul&gt; <!-- handle event on parent -->
  &lt;li&gt;&lt;a href="#"&gt;Item 1&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href="#"&gt;Item 2&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href="#"&gt;Item 3&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href="#"&gt;Item 4&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</code></pre>
          <ul>
            <li class="fragment">listen event on parent</li>
            <li class="fragment">all child events bubble to parent</li>
            <li class="fragment">check e.target</li>
            <li class="fragment">profit!</li>
          </ul>
        </section>
      </section>

      <section>
        <h2>Thank you!</h2>
      </section>
    </div>
  </div>

  <script src="lib/js/head.min.js"></script>
  <script src="plugin/highlight/highlight.js"></script>
  <script src="js/reveal.min.js"></script>

  <script>
    Reveal.initialize({
      controls: true,
      progress: true,
      history: true,
      center: true,
      transition: 'default',
      dependencies: [
        { src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
      ]
    });
  </script>

</body>
</html>
